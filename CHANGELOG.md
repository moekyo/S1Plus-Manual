## [Unreleased]

### 🐛 问题修复
- **修复评分帖子隐藏错误**: 解决了屏蔽用户后，可能会错误地将该用户评分过的帖子整体隐藏的问题。新的实现能更精确地定位并只隐藏发帖者为被屏蔽用户的帖子。
- **修复评分状态刷新**: 修复了取消屏蔽用户后，其评分记录不会立刻重新显示的问题。现在，无论是屏蔽还是取消屏蔽，相关评分的可见性都会即时更新。

### 🐛 问题修复
- **修复用户屏蔽按钮显示异常**: 重构了在用户头像上添加屏蔽按钮的逻辑，通过等待图片完全加载后才计算按钮位置和大小，彻底解决了因网络延迟或图片缓存问题导致的悬浮按钮错位、尺寸不正确或不显示的 BUG。

### ⚡️ 性能优化
- **优化页面变化监测性能**: 将 `MutationObserver` 的监听范围从整个页面 (`body`) 精准地缩小到内容区域 (`#ct`)，显著减少了不必要的脚本重复运行，降低了性能开销，提升了页面流畅度。


## [v4.0.0] - 2025-08-02
### 维护

-   **清理项目文件:** 删除了一个不再需要的截图文件 (`longshot20250802025336.png`)，以保持项目仓库的整洁。

### 优化

-   **用户标记浮窗 (User Tagging Popover):**
    -   **UI/UX 大修:** 完全重新设计了用户标记浮窗，使其具有更现代化、更美观的界面。
        -   **页脚信息:** 浮窗现在会显示用户的头像、用户名和 UID，信息更一目了然。
        -   **动态布局:** 浮窗宽度会根据内容（如用户名长度）动态调整，防止文本溢出。
        -   **统一按钮风格:** 更新了浮窗内的所有按钮（添加、编辑、删除、保存、取消），使其默认显示为灰色，并在鼠标悬停时分别变为蓝色（常规操作）或红色（删除操作），与脚本的整体风格保持一致。
    -   **功能改进:**
        -   **输入法兼容性:** 修复了在使用输入法（IME）输入时，浮窗会意外关闭的问题。

### 🎨 优化与重构

*   **UI 微调与版本更新**：
    *   优化了用户标签浮窗中操作按钮的 padding、字体大小和圆角，使其视觉上更精致、协调。
    *   将设置面板内列表项的背景色恢复为淡灰色 (`#f9fafb`)，以修正之前版本中过于刺眼的纯白背景，确保了整体 UI 风格的统一性和舒适度。
    *   更新脚本版本号至 `3.2.2`。

### 🎨 优化与重构

*   **优化用户标签浮窗样式 (v4)**：
    *   **全新视觉设计**：重新设计了用户标签浮窗，采用现代化的半透明玻璃效果 (backdrop-filter)，并优化了边框、阴影和配色，使其更具质感和美观度。
    *   **增强交互体验**：为浮窗内的按钮（如编辑、删除）添加了清晰的 SVG 图标，提升了可识别性。同时，改善了按钮的交互动画和高亮效果，使操作反馈更直观。
    *   **改善布局与内容**：调整了浮窗内部的布局、间距和字体样式，提升了信息的可读性。在没有标签时，会显示更友好的提示信息。

### 🎨 优化与重构

*   **优化悬浮窗交互**：通过增加延迟显示和优化隐藏逻辑，改善了鼠标在用户头像上快速划过时的体验，避免了不必要的浮窗闪烁，使其交互更加稳定和流畅。

### ✨ 新增与增强

*   **初步增加用户标记功能**：当鼠标悬停在用户头像上时，会显示一个悬浮窗，为后续的标记、编辑和删除功能打下基础。

### 🎨 优化与重构

*   **重构悬浮窗交互**：采用事件委托和智能延迟机制重写了悬浮窗的显示/隐藏逻辑，彻底解决了因鼠标快速移动导致的闪烁和异常消失问题，交互体验更稳定、流畅。
*   **优化悬浮窗UI**：重新设计了用户标记浮窗的UI，使其在视觉风格上与脚本整体保持和谐统一，并提升了布局的清晰度和美观度。

### 🐛 问题修复

*   **修复UI遮挡问题**：通过将悬浮窗挂载到 `body` 而非表格单元格，从根本上解决了其被帖子内容区域遮挡的问题。
*   **修复功能冲突**：清除了所有导致新旧功能冲突的CSS和JS代码，确保了“屏蔽用户”等原有功能的UI和交互恢复正常。

### 🎨 优化与重构

*   **优化设置项交互**:
    *   将设置面板中的所有复选框（Checkbox）替换为更现代、更直观的拨动开关（Toggle Switch），提升了视觉效果和操作体验。
    *   改进了“标题关键字屏蔽”功能的工作流，将自动实时保存改为手动点击“保存规则”按钮确认，避免了误操作和不必要的性能开销，并增加了操作成功提示。

### 🎨 优化与重构

* **统一UI颜色**: 脚本中所有功能性红色（如删除、恢复默认、错误提示等）统一为 `#ef4444`，以增强视觉一致性。
* **优化导航栏编辑器**:
    * 修复了拖拽排序时条目变灰且排序不稳定的问题，提升了拖拽体验。
    * 移除了保存设置时的成功提示，使交互流程更简洁。
* **更新图标**: 将编辑器中的“删除”操作从文字图标 '✖' 升级为更现代、更直观的SVG垃圾桶图标，并优化了其高亮交互效果。

### ✨ 新增与增强

* **新增标题关键字屏蔽**: 新增通过关键字或正则表达式屏蔽帖子的功能，并包含独立的规则编辑器。
* **新增用户评分屏蔽**: 现在屏蔽一个用户后，其在帖子下的所有评分记录（战斗力、理由等）也会被自动隐藏。

### 🎨 优化与重构

* **重构关键字屏蔽编辑器**:
    * 移除了“保存规则”按钮，改为自动实时保存机制，并为输入框增加了400ms防抖以优化性能。
    * 优化了工作流：新增的规则默认不启用，并去除了频繁的保存提示。
* **设置面板UI重构**:
    * 将“帖子屏蔽”页的列表重构为可平滑折叠的区域，优化了空间利用。
    * 增强了“界面定制”中的导航链接编辑器，提供了更清晰的布局和拖拽手柄。
    * 将设置面板的关闭按钮替换为更现代的SVG图标。
* **核心与数据**:
    * “设置同步”功能现已完全支持新的关键字屏蔽规则。
    * 实现了对旧版本关键字数据的自动迁移，确保无缝升级。

### 🐛 问题修复

* 修复了从搜索结果页等特定链接 (`mod=viewthread`) 进入帖子后，用户屏蔽功能不生效的问题。
* 修复了关键字编辑器在旧版手动保存逻辑下，会导致UI组件无响应和输入框重复出现的严重BUG。
---

## [v3.0.1] - 2025-07-28

### 🐛 问题修复

*   修复了从搜索结果页打开帖子时，用户屏蔽功能不生效的问题。

---

## [v3.0] - 2025-07-27

### ✨ 新增与增强

*   **新增“跳转至上次阅读位置”功能 (v3.0)**：
    *   **自动记录进度**：在浏览帖子时，脚本会自动在后台记录您看到的最后一个回复的位置。
    *   **快速跳转链接**：在帖子列表页面，对于有阅读记录的帖子，标题旁边会显示一个 `[跳转]` 链接，点击即可直接跳到上次中断的地方，无缝衔接您的阅读体验。
*   **联动屏蔽功能 (v2.8)**：现在当您屏蔽一个用户时，可以选择同时屏蔽该用户发布的所有主题帖。
*   **全量设置同步 (v2.8)**：同步功能得到全面增强，可以一键导出/导入所有配置，包括屏蔽列表、导航栏和各项开关的状态。

### 🎨 优化与重构

*   **设置面板重构 (v2.8)**：设置面板重构为四个独立的标签页，功能划分更清晰。
*   **代码结构优化**：对多个功能模块进行了代码优化和重构，提升了脚本的稳定性和可维护性。

---

## [v2.7] - 2025-07-26

### 🐛 问题修复

* 修复了自动签到功能在多账号切换时状态不互通的问题。

---

## [v2.6] - 2025-07-26

### 🐛 问题修复

* 修复了自动签到功能被移除的问题。

---

## [v2.5] - 2025-07-26

### 🎨 优化与重构

* **帖子屏蔽按钮UI**：重做并升级了帖子屏蔽按钮的UI和交互，采用更现代化的悬浮标签样式，并增加了更平滑的动画效果，提升了操作直观性和视觉体验。

---

## [v2.4] - 2025-07-26

### ✨ 新增与增强

* **新增“界面定制”功能**：
    * **自定义导航栏**：允许通过拖拽方式自由管理导航链接。
    * **调整界面元素**：可修改论坛Logo链接及隐藏屏蔽用户发言的提示条。

### 🎨 优化与重构

* **设置管理**：重构了设置的保存与加载逻辑，使所有界面定制选项均可即时生效。
* **代码结构**：对UI创建和事件处理部分的代码进行了模块化重构。

---

## [v2.3] - 2025-07-26

### 🐛 问题修复

* **样式兼容性**：调整了屏蔽按钮的CSS，解决了与自定义主题（如 “S1 NUX”）的样式冲突问题。

---

## [v2.2] - 2025-07-26

### 🎨 优化与重构

* **确认弹窗**：重写了屏蔽用户的确认弹窗，替换系统默认弹窗，统一了UI风格并增加了动画效果，提升了用户体验。

---

## [v2.1] - 2025-07-26

### ✨ 新增与增强

* 在“屏蔽管理”面板的页脚增加了版本号和发布日期显示。

### 🎨 优化与重构

* 移除了脚本文件内嵌的更新日志等注释，使代码更简洁。

---

## [v2.0] - 2025-07-26

### ✨ 新增与增强

* **新增用户屏蔽核心功能**：支持鼠标悬停于用户头像上进行屏蔽。

### 🎨 优化与重构

* **屏蔽管理界面**：重新设计管理弹窗，使用选项卡区分“帖子屏蔽”与“用户屏蔽”。
* **数据同步**：更新了导入/导出功能，使其能同时处理帖子和用户的屏蔽数据。
* **UI/UX**：改进了屏蔽按钮的交互动画和视觉样式。

---

## [v1.0 - v1.9]

* **v1.9**：修复了自动签到功能在多账号切换时状态不互通的问题。
* **v1.8**：新增自动签到功能；并修复了部分情况下帖子列表第一个帖子不显示屏蔽按钮的bug。
* **v1.7**：整合了 `@match` 指令，提高匹配效率。
* **v1.6**：新增设置项允许用户选择屏蔽按钮显示位置；并优化了设置项体验，关闭窗口后自动刷新页面。
* **v1.5**：修复了帖子详情页面不显示“屏蔽管理”按钮的bug。
* **v1.4**：优化了屏蔽按钮样式，增加字体粗细。
* **v1.3**：增加了屏蔽按钮右侧间距，解决与“New”标签重叠问题。
* **v1.2**：添加了置顶帖屏蔽功能。
* **v1.1**：添加了多设备同步功能并优化了UI。
* **v1.0**：初始版本发布，实现了基本的帖子屏蔽功能和管理界面。