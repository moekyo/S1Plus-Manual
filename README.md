好的，我已经分析了 `S1Plus.user.js` 脚本的 V5.0.0 版本新增和修改的功能。以下是根据最新功能更新后的 README.md 文件。

-----

# S1 Plus - Stage1st 体验增强套件

## 简介

S1 Plus 是一个为 Stage1st 论坛（S1）设计的用户脚本，旨在全方位优化您的论坛浏览体验。它提供了强大的帖子/用户屏蔽、用户标记、关键字过滤、**回复收藏**、阅读进度跟踪、**云端数据同步**和界面定制等功能，让您可以打造一个更清爽、更高效、更个性化的 S1。

## 功能特点

  - **高级帖子屏蔽**：

      - **快捷操作**：在帖子列表页，帖子左侧提供三点式菜单，点击即可快速屏蔽帖子，并有二次确认防止误操作。
      - **关键字/正则屏蔽**：在设置面板中添加自定义规则，自动屏蔽标题符合关键字或正则表达式的帖子。

  - **智能用户管理**：

      - **一键屏蔽**：在帖子中，通过用户操作栏可一键屏蔽用户，其所有回帖和评分记录都将被隐藏。
      - **联动屏蔽**：可选择在屏蔽用户的同时，自动屏蔽其发布的所有主题帖，并可在设置中为每个已屏蔽用户独立开关此选项。
      - **引用屏蔽优化**：来自已屏蔽用户的引用会被自动折叠为一行提示，点击即可展开查看，避免了信息茧房，同时保持了版面清爽。

  - **强大的用户标记系统**：

      - **行内标记与操作**：直接在帖子楼层中，用户昵称后方会显示“标记该用户”或已设定的标记内容。
      - **快捷菜单**：对于已标记的用户，可通过旁边的“⋮”菜单快速进行“编辑”或“删除”操作。
      - **悬浮提示**：当标记内容过长时，鼠标悬停即可显示完整的标记信息。
      - **集中管理与同步**：在设置面板中可以集中查看、编辑所有用户标记，并支持独立的导入/导出功能。

  - **新增功能：回复收藏与管理**：

      - **一键收藏**：在任何帖子的楼层操作栏，新增“收藏该回复”按钮，方便快捷地保存有价值的内容。
      - **内容预览与跳转**：在设置中心的“回复收藏”面板中，可以查看所有收藏，长回复支持展开/折叠，并提供直达原始帖子的链接。
      - **全文搜索**：强大的搜索功能，可以快速在所有收藏的回复内容、作者、帖子标题中查找您需要的信息。

  - **图片/多媒体隐藏**：

      - **默认隐藏图片**：可在设置中开启，默认将帖子内的所有图片折叠为“显示图片”占位符，点击即可单独加载。
      - **一键切换**：对于图片较多的楼层，会自动生成“显示/隐藏本楼所有图片”的按钮，方便一键操作。

  - **阅读进度跟踪**：

      - **自动记录进度**：在帖子内浏览时，脚本会自动记录您看到的最后一个回复的位置（页数和楼层）。
      - **快速跳转与新回复提示**：在帖子列表页，标题旁会显示一个快速跳转链接（如 `P2-#35`），并根据上次阅读后的新回复数量显示 `+N` 的角标，颜色还会根据最后阅读时间动态变化。

  - **界面与导航定制**：

      - **导航栏自定义**：通过拖拽方式自由管理导航栏链接，包括添加、删除和排序。
      - **界面微调**：可修改论坛Logo链接（使其指向论坛首页）、隐藏已屏蔽用户发言的黄条提示、自定义浏览器标签页标题后缀等。
      - **自动签到**：访问论坛时自动完成每日签到。

  - **强大的设置中心与数据同步**：

      - **多合一面板**：所有功能均可通过一个统一的设置面板进行管理，包含“通用设置”、“帖子屏蔽”、“用户屏蔽”、“用户标记”、“**回复收藏**”、“导航栏定制”和“**设置同步**”七个标签页。
      - **云端同步（新增）**：支持通过 GitHub Gist 实现全自动、跨设备的配置同步。数据变更后将自动推送到云端。
      - **数据安全与完整性**：同步过程采用哈希值校验，确保数据在传输过程中的完整性，能有效防止云端数据损坏污染本地配置。
      - **冲突解决与手动控制**：提供强大的手动同步功能，当出现同步冲突时，会清晰展示本地与云端数据的时间戳，让用户自主选择保留哪个版本。
      - **本地备份**：依然支持一键导出/导入所有配置的JSON文件，方便手动迁移和备份。

## 安装方法

1.  首先安装一个用户脚本管理器：

      * Chrome/Edge: [Tampermonkey](https://www.tampermonkey.net/) 或 [Violentmonkey](https://violentmonkey.github.io/)
      * Firefox: [Greasemonkey](https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/) 或 [Tampermonkey](https://www.tampermonkey.net/)
      * Safari: [Tampermonkey](https://www.tampermonkey.net/)

2.  然后，从以下任一地址安装 S1 Plus 脚本（推荐 GreasyFork）：

      * **[GreasyFork](https://www.google.com/search?q=https://greasyfork.org/scripts/494988-s1-plus-stage1st-%25E4%25BD%2593%25E9%25AA%258C%25E5%25A2%259E%25E5%25BC%25BA%25E5%25A5%2597%25E4%25BB%25B6)** - 点击安装，自动更新。
      * 或者，复制 `S1Plus.user.js` 文件的全部内容，在用户脚本管理器中“创建新脚本”，然后粘贴并保存。

3.  **（可选）设置云同步**：请参考 [**设置教程**](https://silver-s1plus.netlify.app/) 来配置GitHub Gist云同步功能，实现跨设备无缝体验。

## 使用说明

### 屏蔽帖子

  - **手动屏蔽**：在帖子列表页面，帖子最左侧会出现一个三点式「⋮」菜单图标。点击图标，在弹出的确认框中点击绿色的「✓」，即可隐藏该帖。
  - **关键字屏蔽**：
    1.  点击导航栏的「S1 Plus 设置」按钮，进入“帖子屏蔽”标签页。
    2.  在“标题关键字屏蔽规则”区域，您可以添加、编辑或删除规则。规则支持普通关键字和正则表达式。
    3.  启用规则后，所有标题匹配该规则的帖子都会被自动隐藏。

### 屏蔽、标记与收藏

1.  在帖子详情页面，找到目标用户发言楼层的右下角用户信息栏（包含“只看该用户”等链接的地方）。
2.  脚本在此处添加了「屏蔽该用户」、「标记该用户」和「收藏该回复」的链接。
3.  点击「屏蔽该用户」并确认后，该用户的所有回帖和评分记录都将被隐藏。
4.  点击「标记该用户」，会弹出一个小窗口让您输入标记内容并保存。对于已标记的用户，原链接位置会变为标记内容和一个“⋮”菜单，点击菜单可快速编辑或删除标记。
5.  点击「收藏该回复」即可将当前楼层的内容保存到您的收藏夹中。

### S1 Plus 设置面板

点击导航栏新增的「S1 Plus 设置」链接，即可打开功能强大的设置中心。

  - **通用设置**：管理阅读进度、图片隐藏、界面微调等各项功能的开关。
  - **帖子屏蔽**：管理手动屏蔽的帖子列表，并配置关键字/正则屏蔽规则。
  - **用户屏蔽**：管理已屏蔽的用户列表，并可独立控制是否屏蔽每个用户的主题帖。
  - **用户标记**：集中管理所有用户标记，支持独立导入/导出。
  - **回复收藏**：搜索、浏览和管理您收藏的所有回复。
  - **导航栏定制**：通过拖拽方式自定义导航栏链接。
  - **设置同步**：配置云同步，或一键导出/导入您的所有 S1 Plus 数据，或进行精细化的数据清理。

## 常见问题

**Q: 屏蔽和标记的数据会永久保存吗？**

A: 是的，所有数据都保存在您当前浏览器的本地存储中。如果您配置了云同步，数据还会被备份到您的个人GitHub Gist，除非您主动清除。

**Q: 如何在不同浏览器或电脑间同步我的所有配置？**

A: **强烈推荐使用云同步功能**。进入“设置同步”标签页，按照[设置教程](https://silver-s1plus.netlify.app/)配置GitHub Gist。配置完成后，您的所有设置（包括屏蔽、标记、收藏等）将在所有设备间自动保持同步。
作为备用方案，您依然可以使用传统的“导出数据”和“导入数据”功能，通过手动复制粘贴文本来迁移配置。

**Q: 为什么屏蔽/标记/收藏按钮没有显示？**

A: 请确保脚本已在您的用户脚本管理器中正确安装并启用。如果问题依旧，可能是论坛网页结构发生了变化，请在本项目的 Github 页面提交 Issue，等待后续更新。

## 反馈与建议

如有任何问题或建议，欢迎通过 [Github Issues](https://github.com/moekyo/S1Plus-Manual/issues) 进行反馈。

## 许可证

[MIT License](https://www.google.com/search?q=LICENSE)